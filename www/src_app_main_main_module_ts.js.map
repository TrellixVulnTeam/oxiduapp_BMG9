{"version":3,"file":"src_app_main_main_module_ts.js","mappings":"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","sources":["./src/app/main/main-routing.module.ts","./src/app/main/main.module.ts","./src/app/main/main.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { MainPage } from './main.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: MainPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class MainPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { MainPageRoutingModule } from './main-routing.module';\r\nimport { MainPage } from './main.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ReactiveFormsModule,\r\n    MainPageRoutingModule\r\n  ],\r\n  declarations: [MainPage]\r\n})\r\nexport class MainPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { CategoryService } from '../_services/category.service';\r\nimport { Platform, ToastController } from '@ionic/angular';\r\nimport { PluginListenerHandle } from '@capacitor/core';\r\nimport { Network } from '@capacitor/network';\r\nimport { FilterDefaultModel } from '../_model/filter-default-model';\r\nimport { IonLoadingService } from '../_services/ion-loading.service';\r\nimport { EstablishmentService } from '../_services/establishment.service';\r\nimport { Establishment } from '../_model/establishment-model';\r\nimport { environment } from 'src/environments/environment';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-main',\r\n  templateUrl: './main.page.html',\r\n  styleUrls: ['./main.page.scss'],\r\n})\r\nexport class MainPage implements OnInit {\r\n  states: any[];\r\n  toggled = false;\r\n  hasFilter = false;\r\n  networkStatus: any;\r\n  networkListener: PluginListenerHandle;\r\n  establishments: Establishment[];\r\n  titleFilter: any;\r\n  form: FormGroup;\r\n  constructor(\r\n    private categoryService: CategoryService,\r\n    private establishmentService: EstablishmentService,\r\n    private platform: Platform,\r\n    private ionLoaderService: IonLoadingService,\r\n    public toastController: ToastController,\r\n    private formBuilder: FormBuilder\r\n  ) {\r\n\r\n  }\r\n\r\n  slideOpts = {\r\n    initialSlide: 0,\r\n    slidesPerView: 1,\r\n    autoplay: true,\r\n    speed: 400\r\n  }\r\n\r\n  afterslidesLoad(slides) {\r\n    slides.startAutoplay();\r\n  }\r\n\r\n  async ngOnInit() {\r\n    this.states = this.categoryService.getStates();\r\n    this.form = this.formBuilder.group({\r\n      search: ['', Validators.required]\r\n    });\r\n  }\r\n\r\n  async filter(state) {\r\n    this.networkStatus = await Network.getStatus();\r\n    if (this.networkStatus.connected === false) {\r\n      return this.presentToast(\"Dispositivo sem internet. Verifique a conexão e tente novamente.\");\r\n    }\r\n    const filter: FilterDefaultModel = new FilterDefaultModel();\r\n    this.ionLoaderService.simpleLoader().then(() => {\r\n      filter.id = state.id;\r\n      this.establishmentService.getByState(filter)\r\n        .subscribe(async establisments => {\r\n          if (establisments.length === 0) {\r\n            this.establishments = [];\r\n            this.ionLoaderService.dismissLoader();\r\n            return this.presentToast(\"Nenhum registro encontrado!\");\r\n          } else {\r\n            this.establishments = establisments;\r\n            this.titleFilter = this.establishments.length + ' encontrado(s) / ' + state.description;\r\n            this.hasFilter = true;\r\n            this.ionLoaderService.dismissLoader();\r\n          }\r\n\r\n        });\r\n    });\r\n  }\r\n\r\n  async presentToast(error: string) {\r\n    const toast = await this.toastController.create({\r\n      message: error,\r\n      duration: 2000,\r\n      position: 'top'\r\n    });\r\n\r\n    toast.present();\r\n  }\r\n\r\n  getImage(nomeImage) {\r\n    return environment.urlImagesEstablishment + nomeImage;\r\n  }\r\n\r\n  onBackFilter() {\r\n    this.hasFilter = false;\r\n  }\r\n\r\n  public toggle(): void {\r\n    this.toggled = !this.toggled;\r\n  }\r\n\r\n  async search() {\r\n    if (this.form.invalid) {\r\n      return;\r\n    }\r\n    this.networkStatus = await Network.getStatus();\r\n    if (this.networkStatus.connected === false) {\r\n      return this.presentToast(\"Dispositivo sem internet. Verifique a conexão e tente novamente.\");\r\n    }\r\n    const filter: FilterDefaultModel = new FilterDefaultModel();\r\n    this.ionLoaderService.simpleLoader().then(() => {\r\n      filter.name = this.form.controls.search.value;\r\n      this.establishmentService.getByDescription(filter).subscribe(async establisments => {\r\n        if (establisments.length === 0) {\r\n          this.establishments = [];\r\n          this.ionLoaderService.dismissLoader();\r\n          return this.presentToast(\"Nenhum registro encontrado!\");\r\n        } else {\r\n          this.establishments = establisments;\r\n          this.titleFilter = this.establishments.length + ' encontrado(s)';\r\n          this.hasFilter = true;\r\n          this.toggled = !this.toggled;\r\n          this.ionLoaderService.dismissLoader();\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n"],"names":["Component","CategoryService","Platform","ToastController","Network","FilterDefaultModel","IonLoadingService","EstablishmentService","environment","FormBuilder","Validators","MainPage","constructor","categoryService","establishmentService","platform","ionLoaderService","toastController","formBuilder","initialSlide","slidesPerView","autoplay","speed","afterslidesLoad","slides","startAutoplay","ngOnInit","states","getStates","form","group","search","required","filter","state","networkStatus","getStatus","connected","presentToast","simpleLoader","then","id","getByState","subscribe","establisments","length","establishments","dismissLoader","titleFilter","description","hasFilter","error","toast","create","message","duration","position","present","getImage","nomeImage","urlImagesEstablishment","onBackFilter","toggle","toggled","invalid","name","controls","value","getByDescription","selector","template"],"sourceRoot":"webpack:///"}